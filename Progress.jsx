import React,{useEffect,useState} from 'react';import api from '../lib_api';export default function Progress({user}){const [state,setState]=useState(null);const [weight,setWeight]=useState('');async function refresh(){const {data}=await api.get(`/api/progress/status/${user?.userId||'demo'}`);setState(data)}useEffect(()=>{refresh()},[user]);async function log(){const fd=new FormData();fd.append('userId',user?.userId||'demo');fd.append('weight',weight||'');const {data}=await api.post('/api/progress/log',fd);setWeight('');setState(s=>({...s,xp:data.xp,rank:data.rank}))}return <div className='rune-card'><h2 className='text-xl font-bold mb-2'>Temple of Progress</h2><div className='mb-3'>XP: <span className='text-amber-400 font-semibold'>{state?.xp||0}</span> â€” Rank: <span className='text-amber-400 font-semibold'>{state?.rank?.title||'Thrall'}</span></div><div className='flex gap-2 mb-3'><input className='bg-black/50 border border-neutral-700 rounded px-3 py-2' placeholder='Update Weight' value={weight} onChange={e=>setWeight(e.target.value)}/><button className='rune-btn' onClick={log}>Log Update</button><button className='rune-btn' onClick={refresh}>Refresh</button></div><div className='text-sm opacity-70'>Upload images and measurements to earn Rune XP (API stubbed).</div></div>}
