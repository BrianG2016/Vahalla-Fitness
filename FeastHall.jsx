import React,{useState} from 'react';import api from '../lib_api';export default function FeastHall({user}){const [plan,setPlan]=useState(null);const [allergies,setAllergies]=useState('');async function gen(){const {data}=await api.post('/api/nutrition/plan',{allergies:allergies.split(',').map(s=>s.trim().toLowerCase()).filter(Boolean)});setPlan(data)}return <div className='rune-card'><h2 className='text-xl font-bold mb-2'>Feast Hall (Premium)</h2>{!user?.premium&&<div className='mb-3 text-amber-300'>Become Premium to unlock AI meal plans and ad-free feasting.</div>}<div className='flex gap-2 mb-3'><input className='flex-1 bg-black/50 border border-neutral-700 rounded px-3 py-2' placeholder='Allergies (comma separated)' value={allergies} onChange={e=>setAllergies(e.target.value)}/><button className='rune-btn' onClick={gen}>Summon Plan</button></div>{plan&&(<div className='grid md:grid-cols-3 gap-3'>{[plan.pre,plan.post,plan.daily].map((blk,i)=>(<div key={i} className='border border-neutral-700 rounded p-3'><div className='font-semibold text-amber-400'>{blk.name}</div><ul className='text-sm opacity-85 mt-1 list-disc ml-5'>{blk.items.map((it,idx)=>(<li key={idx}>{it.title}</li>))}</ul></div>))}</div>)}</div>}
